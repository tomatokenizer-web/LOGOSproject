# 응답 타이밍 모듈

> **최종 업데이트**: 2026-01-05
> **코드 위치**: `src/core/response-timing.ts`
> **상태**: 활성

---

## 맥락 및 목적

이 모듈은 원시 응답 시간을 의미 있는 학습 신호로 변환하기 위해 존재합니다. 사용자가 어휘 문제에 답할 때, 응답하는 데 걸리는 시간은 단순한 정답 여부를 훨씬 넘어서는 인지 처리에 대한 중요한 정보를 드러냅니다.

**비즈니스/사용자 필요성**: 언어 학습 애플리케이션은 일반적으로 답이 맞는지 틀린지만 추적합니다. 그러나 10초가 걸리는 정답은 800밀리초가 걸리는 정답과 매우 다른 지식을 나타냅니다. LOGOS는 다음을 구별해야 합니다:
- **자동적 지식**: 깊은 학습을 나타내는 빠르고 유창한 응답
- **노력을 들인 회상**: 취약한 기억 흔적을 시사하는 느리지만 정확한 응답
- **운 좋은 추측**: 객관식 문제에서 의심스러울 정도로 빠른 응답
- **게이밍 행동**: 사용자가 시스템을 속이려는 것을 시사하는 로봇 같은 패턴

응답 타이밍 모듈은 원시 밀리초 측정과 간격 반복 알고리즘(FSRS)을 구동하는 교육적으로 의미 있는 분류 사이의 격차를 연결합니다.

**사용 시점**: 사용자가 학습 과제를 완료할 때마다. 응답 시간이 캡처되고, 연구 기반 임계값에 대해 분석되며, 항목이 다음에 복습될 시기에 영향을 미치는 FSRS 등급으로 변환됩니다.

---

## 미시적 관점: 직접적 관계

### 의존성 (이 모듈이 필요로 하는 것)

- `src/core/types.ts`: 기본 타입 정의 가져오기
  - `TaskFormat`: 과제의 제시 형식 (mcq, fill_blank, free_response, matching, ordering, dictation)
  - `TaskType`: 과제의 인지적 유형 (recognition, recall, production, timed)
  - `MasteryStage`: 사용자가 항목을 얼마나 잘 아는지를 나타내는 0-4 진행 척도
  - `FSRSRating`: FSRS 스케줄링 알고리즘이 사용하는 1-4 등급 척도

### 종속자 (이 모듈을 필요로 하는 것)

현재 이 모듈은 다음에서 소비되도록 설계되었습니다:

- `src/main/services/scoring-update.service.ts`: 사용자 응답을 처리하고 숙달 상태를 업데이트하는 서비스. 응답이 제출되면, 이 서비스는 `calculateFSRSRatingWithTiming()`을 사용하여 응답 시간을 적절한 FSRS 등급으로 변환할 수 있습니다.

- `src/main/ipc/learning.ipc.ts`와의 향후 통합: IPC 핸들러가 렌더러 프로세스의 학습 응답을 처리할 때 이 모듈을 호출할 것입니다.

- `src/renderer/components/session/*`과의 향후 통합: 세션 컴포넌트가 유창성 지표를 사용하여 진행 표시기를 표시할 수 있습니다.

### 데이터 흐름

```
사용자가 과제 완료
        |
        v
응답 시간 (ms) 캡처
        |
        v
getTaskCategory()가 과제 유형 결정
        |
        v
getAdjustedThresholds()가 개인화된 임계값 계산
  - 과제 범주에 따라 (인식 vs 산출)
  - 숙달 단계에 따라 조정 (초보자에게 관대)
  - 단어 길이에 따라 조정 (긴 단어 = 더 많은 시간)
        |
        v
analyzeResponseTime()이 응답 분류
  - too_fast / fast / good / slow / very_slow
  - 자동화 탐지
  - 추측 가능성 표시
        |
        v
calculateFSRSRatingWithTiming()이 FSRS 등급 생성 (1-4)
        |
        v
FSRS 알고리즘이 등급을 사용하여 다음 복습 예약
```

---

## 거시적 관점: 시스템 통합

### 아키텍처 계층

이 모듈은 LOGOS 아키텍처의 **핵심 알고리즘 계층**에 위치합니다:

```
계층 1: 렌더러 (React UI) - 사용자가 과제를 보고, 응답 입력
    |
계층 2: IPC 브리지 - 응답이 메인 프로세스로 전송됨
    |
계층 3: 서비스 - scoring-update.service가 조율
    |
계층 4: 핵심 알고리즘 - 이 모듈이 여기 있음
    |              irt.ts, fsrs.ts, pmi.ts와 함께
    |
계층 5: 데이터베이스 - 숙달 상태 저장
```

응답 타이밍 모듈은 부작용이 없는 **순수 함수 라이브러리**입니다. 입력 (응답 시간, 과제 유형, 숙달 단계)을 받아 출력 (분석, 등급)을 반환합니다. 이것은 매우 테스트 가능하고 이식 가능하게 만듭니다.

### 전체적 영향

응답 타이밍은 FSRS 알고리즘이 속지 않도록 하는 **품질 신호**입니다. 이것 없이는:

- 모든 객관식에서 올바르게 추측하는 사용자가 실제로 자료를 알고 있는 것처럼 진행됨
- 30초 동안 고군분투하지만 결국 정답을 얻는 사용자가 즉시 답한 사람과 같은 스케줄링을 받음
- 지식이 자동화되었는지 (언어 학습의 궁극적 목표) 감지할 방법이 없음

이 모듈은 LOGOS가 제2언어 습득 연구의 개념인 **자동화 추적**을 구현할 수 있게 합니다. 노력을 들인 회상에서 자동적 접근으로의 전환은 진정한 언어 숙련도의 특징입니다.

**시스템 의존성**:

| 구성요소 | 의존성 유형 | 응답 타이밍 실패 시 영향 |
|-----------|----------------|--------------------------------|
| FSRS 스케줄링 | 직접 | 차선의 복습 간격 |
| 숙달 단계 탐지 | 간접 | 단계 4 (자동화) 신뢰 불가 |
| 세션 분석 | 직접 | 유창성 지표 사용 불가 |
| 게이밍 방지 탐지 | 중요 | 부정행위 감지 불가 |

### 임계 경로 분석

**중요도 수준**: 중상

- **완전 실패 시**: FSRS가 정답 여부만으로 등급을 매기는 것으로 대체, 학습은 계속되지만 차선
- **임계값이 잘못 조정된 경우**: 사용자가 자동적이거나 어려움을 겪는 것으로 잘못 분류될 수 있음
- **우아한 성능 저하**: 모든 함수가 합리적인 기본값을 가지고 엣지 케이스를 처리함

---

## 기술적 개념 (쉬운 설명)

### 어휘 결정 과제 임계값

**기술적**: 참가자가 문자열이 실제 단어인지 빠르게 결정해야 하는 어휘 결정 과제(LDT)에 대한 심리언어학 연구에서 도출된 응답 시간 임계값.

**쉬운 설명**: 과학자들은 수십 년 동안 사람들이 단어를 얼마나 빨리 인식하는지 측정해 왔습니다. 영어 원어민은 일반적으로 400-600밀리초 내에 일반적인 단어를 인식합니다. 제2언어 학습자는 숙련도에 따라 일반적으로 600-1500ms가 더 걸립니다. 이러한 연구 결과가 LOGOS의 "얼마나 빨라야 충분히 빠른지" 판단의 기초를 형성합니다.

**사용 이유**: 임의의 임계값을 발명하는 대신, 동료 검토된 연구의 경험적으로 검증된 타이밍 벤치마크를 사용합니다 (Yap & Balota, 2015; Harrington, 2006; Segalowitz & Hulstijn, 2005).

### 과제 범주

**기술적**: 과제 형식을 인지 처리 범주로 그룹화하는 분류 시스템: 인식 (식별), 회상 (검색), 산출 (생성), 시간 제한 (유창성 중심).

**쉬운 설명**:
- **인식 과제** (객관식 같은)는 군중 속에서 친구의 얼굴을 알아보는 것과 같습니다 - 보이는 것을 아는 것과 일치시키기만 하면 됩니다
- **회상 과제** (빈칸 채우기 같은)는 친구를 볼 때 그 이름을 기억하는 것과 같습니다 - 정보를 검색해야 합니다
- **산출 과제** (문장 쓰기 같은)는 친구를 누군가에게 소개하는 것과 같습니다 - 처음부터 언어를 생성해야 합니다
- **시간 제한 과제**는 지식이 자동적인지 테스트하기 위해 특별히 설계됨

**사용 이유**: 다른 인지 과정은 근본적으로 다른 시간 프로필을 가집니다. 사용자가 500ms 안에 문장을 쓰기를 기대하는 것은 비합리적입니다; 15초 안에 단어를 인식하기를 기대하는 것은 문제를 시사합니다.

### 숙달 단계 수정자

**기술적**: 학습자의 현재 항목에 대한 숙달 단계에 따라 기본 임계값에 적용되는 곱셈 조정 요소 (0.8 ~ 2.0).

**쉬운 설명**: 초보자에게 더 관대합니다. 어제 막 배운 단어라면, 몇 달 동안 알고 있던 단어만큼 빨리 응답하길 기대하지 않습니다. 수정자는:
- 단계 0 (신규): 2배 더 많은 시간 허용
- 단계 1 (인식): 1.5배 더 많은 시간
- 단계 2 (회상): 1.2배 더 많은 시간
- 단계 3 (통제됨): 정상 시간
- 단계 4 (자동화): 0.8배 시간 (더 빠른 응답 기대)

**사용 이유**: 공정한 평가는 학습 단계를 고려해야 합니다. 잘 알려진 단어에 대해 "느린" 2초 응답이 새로 도입된 단어에 대해서는 "좋은" 것일 수 있습니다.

### 자동화 탐지

**기술적**: 응답 시간이 범주별 임계값 (인식 1000ms, 회상 2000ms, 산출 4000ms) 아래인지 여부와 정답 여부를 결합한 불리언 분류.

**쉬운 설명**: 진정한 언어 유창성은 생각할 필요가 없다는 것을 의미합니다. "the cat sat on the"를 읽을 때 다음 단어가 "mat"이나 "floor" 같은 것이어야 한다는 것을 즉시 알 수 있습니다 - 의식적으로 기억을 검색하지 않습니다. 자동화 탐지는 응답이 이러한 무의식적이고 유창한 처리를 시사할 만큼 충분히 빠를 때를 식별합니다.

**사용 이유**: 단계 4 숙달 (자동화)은 학습자가 지식에 대한 빠르고 노력 없는 접근을 보여줄 때만 부여되어야 합니다. 이것은 어휘를 알지만 실제로 실시간 대화에서 사용할 수 없는 "종이 유창성"을 방지합니다.

### 변동 계수

**기술적**: 표준 편차와 평균의 비율 (CV = sigma / mu)로, 유창성 지표에서 응답 시간 일관성을 측정하는 데 사용됨.

**쉬운 설명**: 10개 질문에 [800, 850, 790, 810, 820, 805, 795, 830, 815, 785] 밀리초로 응답하면, 응답이 매우 일관적입니다. 시간이 [500, 2000, 800, 3500, 400, 1900, 600, 2800, 450, 1700]이면, 모든 곳에 있습니다. 변동 계수는 이 일관성을 포착합니다 - 낮은 숫자가 더 일관적 (따라서 더 자동적) 응답을 의미합니다.

**사용 이유**: 자동적 지식은 속도뿐만 아니라 일관성으로도 특징지어집니다. 낮은 CV는 지식에 대한 안정적이고 신뢰할 수 있는 접근을 나타냅니다.

### 추측 탐지

**기술적**: 응답 시간이 "빠른" 임계값 아래이고 (과제가 인식 유형이거나 응답이 틀린 경우)에 기반한 응답의 잠재적 추측 휴리스틱 분류.

**쉬운 설명**: 누군가가 300ms 안에 객관식 질문에 답하고 정답을 맞추면, 정말로 답을 알고 있을 수도 있고 - 무작위로 클릭하고 운이 좋았을 수도 있습니다. 4개 선택지 객관식에서 무작위 추측은 25% 확률로 맞습니다. 우리는 의심스럽게 빠른 응답을 표시하여 시스템이 운 좋은 추측을 높은 등급으로 보상하지 않도록 합니다.

**사용 이유**: 간격 반복 시스템의 게이밍을 방지합니다. 추측이 보상되면, 사용자는 실제로 배우지 않고 항목을 진행시킬 수 있고, 그런 다음 언어를 산출해야 할 때 재앙적으로 실패합니다.

### 봇/부정행위 패턴 탐지

**기술적**: 비인간적이거나 게이밍 행동을 식별하기 위한 응답 시퀀스의 다중 패턴 분석: 균일한 타이밍 (로봇), 모두 빠르고-높은 정확도 (봇), 모두 빠르고-낮은 정확도 (무작위 클릭).

**쉬운 설명**:
- **로봇 타이밍**: 인간 응답 시간은 자연스럽게 변합니다. 누군가가 연속으로 10개 질문에 정확히 1000ms로 응답하면, 무언가 이상합니다.
- **봇 패턴**: 매우 높은 정확도와 함께 극도로 빠른 응답은 자동화나 답 검색을 시사합니다.
- **무작위 클릭**: 매우 낮은 정확도와 함께 극도로 빠른 응답은 사용자가 시도하지 않고 그냥 클릭하고 있음을 시사합니다.

**사용 이유**: 학습 데이터의 무결성을 보호합니다. 사용자가 시스템을 게이밍하면, 숙달 기록이 무의미해지고, 전체 적응 시스템이 무너집니다.

---

## 학술적 기반

이 모듈은 확립된 심리언어학 연구에 기반합니다:

| 연구 영역 | 주요 발견 | LOGOS가 사용하는 방법 |
|---------------|-------------|-------------------|
| 어휘 결정 과제 | 원어민: 고빈도 단어에 400-600ms | 인식 과제의 기본 임계값 |
| L2 처리 | 숙련된 L2 화자: 600-900ms | 학습자를 위한 조정된 임계값 |
| 자동화 이론 | <1000ms 인식은 자동적 접근 나타냄 | 단계 4 게이팅 기준 |
| 산출 vs 인식 | 산출은 인식보다 1.5-3배 더 오래 걸림 | 과제 범주별 다른 임계값 |

**주요 인용문헌**:
- Yap, M.J. & Balota, D.A. (2015). Visual word recognition. Oxford Handbook of Reading.
- Harrington, M. (2006). The lexical decision task as a measure of L2 lexical proficiency. EUROSLA Yearbook.
- Segalowitz, N. & Hulstijn, J. (2005). Automaticity in bilingualism and second language learning.

---

## 변경 이력

### 2026-01-05 - 초기 문서화
- **변경 사항**: response-timing 모듈에 대한 내러티브 문서 생성
- **이유**: FSRS 통합을 위한 연구 기반 응답 시간 분석을 제공하기 위해 모듈 구현됨
- **영향**: 모든 과제 유형에 걸쳐 품질 인식 간격 반복 스케줄링 가능
